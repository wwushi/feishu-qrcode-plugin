# 飞书多维表格二维码生成插件

## 功能介绍

这是一个飞书多维表格的字段捷径插件，可以将表格中任意字段的内容生成二维码图片，并支持丰富的个性化配置和自动更新。

### 主要功能

- ✅ **基本二维码生成**：将文本或链接转换为二维码
- ✅ **Logo嵌入**：支持上传品牌标识，嵌入二维码中心
- ✅ **彩色配置**：自定义二维码颜色和背景色（HEX色值）
- ✅ **文字定制**：支持在二维码下方添加文字内容
- ✅ **文字样式**：自定义文字颜色和大小
- ✅ **尺寸调整**：支持调整二维码尺寸
- ✅ **边距设置**：支持调整二维码边距
- ✅ **容错率选择**：支持L、M、Q、H四个等级的容错率
- ✅ **自动更新**：源字段内容变化时自动重新生成二维码

## 安装方法

1. 克隆或下载本项目到本地
2. 进入项目目录，安装依赖：
   ```bash
   npm install
   ```
3. 登录飞书开发者后台，创建新的插件
4. 上传本项目的代码包
5. 在飞书多维表格中启用该插件

## 使用方法

1. 在飞书多维表格中创建一个新的字段
2. 选择「字段捷径」类型
3. 在字段捷径配置中选择「二维码生成器」插件
4. 配置参数：
   - **content**：选择要生成二维码的源字段
   - **logo**：logo图片URL，可将品牌标识嵌入二维码中心
   - **qrColor**：二维码颜色（HEX色值），默认黑色
   - **bgColor**：二维码背景色（HEX色值），默认白色
   - **text**：二维码下方的文字内容
   - **textColor**：二维码下方文字的颜色（HEX色值），默认黑色
   - **textSize**：二维码下方文字的大小，默认12
   - **size**：二维码尺寸，默认200
   - **margin**：二维码边距，默认1
   - **errorCorrectionLevel**：二维码容错率，可选值：L、M、Q、H，默认M
5. 保存配置后，表格会自动为每行数据生成对应的二维码

## 自动更新

当源字段的内容发生变化时，二维码会自动重新生成，无需手动操作。

## 技术原理

- 使用 `qrcode` 库生成高质量二维码图片
- 通过飞书插件 SDK 与多维表格进行交互
- 支持 Base64 图片格式输出，直接嵌入表格
- 采用参数化设计，支持丰富的个性化配置

## 开发说明

### 项目结构

```
feishu-qrcode-plugin/
├── index.js          # 插件主逻辑
├── manifest.json     # 插件配置文件
├── package.json      # 项目依赖配置
├── test.js           # 测试文件
├── package-plugin.js # 打包脚本
└── README.md         # 项目说明文档
```

### 核心功能

- `generateQRCode(content, logo, qrColor, bgColor, text, textColor, textSize, size, margin, errorCorrectionLevel)`：生成二维码的核心函数
  - `content`：要生成二维码的文本内容或链接
  - `logo`：logo图片URL，嵌入二维码中心
  - `qrColor`：二维码颜色（HEX色值）
  - `bgColor`：二维码背景色（HEX色值）
  - `text`：二维码下方的文字内容
  - `textColor`：文字颜色（HEX色值）
  - `textSize`：文字大小
  - `size`：二维码尺寸
  - `margin`：二维码边距
  - `errorCorrectionLevel`：容错率（L/M/Q/H）
  - 返回：二维码图片的 Base64 编码

## 注意事项

1. 确保插件有足够的权限访问多维表格数据
2. 二维码内容不宜过长，建议控制在1000字符以内
3. 过大的二维码尺寸可能影响加载速度，建议使用默认值200
4. logo图片不宜过大，建议使用正方形图片，尺寸不超过二维码的1/4
5. 高容错率会增加二维码密度，建议根据实际需求选择

## 版本历史

- v1.2.0：增强版，支持logo嵌入、文字定制、彩色配置等丰富功能
- v1.1.0：优化版，改进了代码结构，支持更多配置选项
- v1.0.0：初始版本，支持基本的二维码生成功能
