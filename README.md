# 飞书多维表格二维码生成插件

## 功能介绍
这是一个飞书多维表格的字段捷径插件，可以将表格中任意字段的内容生成高质量二维码，并支持丰富的个性化配置和自动更新。

### 主要功能
- ✅ **基本二维码生成**：将文本或链接转换为二维码
- ✅ **Logo嵌入**：支持上传品牌标识，嵌入二维码中心
- ✅ **彩色配置**：自定义二维码颜色和背景色（HEX色值）
- ✅ **文字定制**：支持在二维码下方添加文字内容
- ✅ **文字样式**：自定义文字颜色和大小
- ✅ **尺寸调整**：支持调整二维码尺寸
- ✅ **边距设置**：支持调整二维码边距
- ✅ **容错率选择**：支持L、M、Q、H四个等级的容错率
- ✅ **自动更新**：源字段内容变化时自动重新生成二维码


### 创新点与差异点
1. **丰富的个性化配置**：提供了10个可配置参数，支持从颜色到文字的全面定制
2. **高质量生成**：使用成熟的qrcode库，确保生成的二维码清晰可扫描
3. **自动更新机制**：源字段内容变化时自动重新生成，无需手动操作
4. **轻量高效**：插件体积小，执行速度快，不影响表格性能
5. **隐私安全**：所有处理都在客户端完成，不收集或传输任何用户数据

## 安装方法
1. 克隆或下载本项目到本地
2. 进入项目目录，安装依赖：
   ```bash
   npm install
   ```
3. 登录飞书开发者后台，创建新的插件
4. 上传本项目的代码包
5. 在飞书多维表格中启用该插件


## 使用方法
1. 在飞书多维表格中创建一个新的字段
2. 选择「字段捷径」类型
3. 在字段捷径配置中选择「二维码生成器」插件
4. 配置参数：
   - **content**：选择要生成二维码的源字段
   - **logo**：logo图片URL，可将品牌标识嵌入二维码中心
   - **qrColor**：二维码颜色（HEX色值），默认黑色
   - **bgColor**：二维码背景色（HEX色值），默认白色
   - **text**：二维码下方的文字内容
   - **textColor**：二维码下方文字的颜色（HEX色值），默认黑色
   - **textSize**：二维码下方文字的大小，默认12
   - **size**：二维码尺寸，默认200
   - **margin**：二维码边距，默认1
   - **errorCorrectionLevel**：二维码容错率，可选值：L、M、Q、H，默认M
5. 保存配置后，表格会自动为每行数据生成对应的二维码


## 自动更新
当源字段的内容发生变化时，二维码会自动重新生成，无需手动操作。

## 技术原理
- 使用 `qrcode` 库生成高质量二维码图片
- 通过飞书插件 SDK 与多维表格进行交互
- 支持 Base64 图片格式输出，直接嵌入表格
- 采用参数化设计，支持丰富的个性化配置
- 所有处理都在客户端完成，不依赖外部服务


## 数据隐私与安全

### 数据处理说明

1. **数据范围**：本插件仅处理用户在配置中选择的字段数据，用于生成二维码
2. **数据存储**：不收集、存储或传输任何用户数据到外部服务器
3. **数据处理**：所有数据处理都在飞书客户端环境中完成
4. **隐私保护**：严格遵循《个人信息保护法》和《网络安全法》等法律法规

### 权限说明

- `bitable:app`：访问多维表格应用信息
- `bitable:record:read`：读取表格记录数据
- `bitable:record:write`：写入生成的二维码到表格

## 兼容性

- 支持飞书多维表格3.0.0及以上版本
- 兼容所有支持字段捷径的飞书客户端
- 支持按需加载，不影响表格初始加载速度

## 性能优化

- 执行时间限制：5秒内完成二维码生成
- 内存使用限制：128MB
- 轻量级设计，不包含冗余代码
- 高效的二维码生成算法

## 知识产权声明

1. 本插件使用的 `qrcode` 库遵循 MIT 开源协议
2. 插件图标来源于 flaticon.com，遵循 CC 3.0 协议
3. 本插件的代码为原创开发，不侵犯任何第三方知识产权
4. 插件使用飞书提供的官方 SDK 和 API，遵循飞书开放平台规范

## 合规性声明

1. 本插件不包含任何违法、淫秽、歧视性或其他不当内容
2. 本插件严格遵循飞书开放平台的管理规范
3. 本插件不包含任何广告或推广内容
4. 本插件不干扰用户正常操作或误导用户

## 支持与反馈

如遇到问题或有改进建议，请通过以下方式反馈：
- 飞书开放平台开发者社区
- 插件管理后台的反馈渠道

## 开发说明

### 项目结构

```
feishu-qrcode-plugin/
├── index.js          # 插件主逻辑
├── manifest.json     # 插件配置文件
├── package.json      # 项目依赖配置
├── test.js           # 测试文件
├── package-plugin.js # 打包脚本
└── README.md         # 项目说明文档
```

### 核心功能

- `generateQRCode(content, logo, qrColor, bgColor, text, textColor, textSize, size, margin, errorCorrectionLevel)`：生成二维码的核心函数
  - `content`：要生成二维码的文本内容或链接
  - `logo`：logo图片URL，嵌入二维码中心
  - `qrColor`：二维码颜色（HEX色值）
  - `bgColor`：二维码背景色（HEX色值）
  - `text`：二维码下方的文字内容
  - `textColor`：文字颜色（HEX色值）
  - `textSize`：文字大小
  - `size`：二维码尺寸
  - `margin`：二维码边距
  - `errorCorrectionLevel`：容错率（L/M/Q/H）
  - 返回：二维码图片的 Base64 编码

## 注意事项

1. 确保插件有足够的权限访问多维表格数据
2. 二维码内容不宜过长，建议控制在1000字符以内
3. 过大的二维码尺寸可能影响加载速度，建议使用默认值200
4. logo图片不宜过大，建议使用正方形图片，尺寸不超过二维码的1/4
5. 高容错率会增加二维码密度，建议根据实际需求选择

## 版本历史

- v1.2.0：增强版，支持logo嵌入、文字定制、彩色配置等丰富功能
- v1.1.0：优化版，改进了代码结构，支持更多配置选项
- v1.0.0：初始版本，支持基本的二维码生成功能
